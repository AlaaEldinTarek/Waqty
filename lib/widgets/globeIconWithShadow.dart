import 'package:flutter/material.dart';
import 'package:flutter_svg/flutter_svg.dart';
import 'package:path_drawing/path_drawing.dart';

class GlobeIconWithShadow extends StatelessWidget {
  const GlobeIconWithShadow({super.key});

  @override
  Widget build(BuildContext context) {
    return CustomPaint(
      painter: GlobeShadowPainter(),
      child: SvgPicture.asset(
        'assets/icons/globe.svg',
        width: 280,
        height: 280,
        color: const Color(0xFF0D308A),
      ),
    );
  }
}

class GlobeShadowPainter extends CustomPainter {
  @override
  void paint(Canvas canvas, Size size) {
    final path = parseSvgPathData(
      // دا مجرد مثال بسيط، انت استبدله بمسار globe الحقيقي المستخرج من ملف SVG
      'M94.7319 0.365723C81.8072 1.51183 72.0738 4.09721 60.6384 9.40128C46.6233 15.8781 34.2571 26.0598 24.4173 39.2C13.9924 53.1398 7.10452 71.3442 5.61525 88.9089C5.21634 93.7865 5.45569 105.754 6.04076 110.018C8.40763 127.237 14.7636 142.856 24.8428 156.182C35.0815 169.749 49.3359 180.89 64.8668 187.554C76.3022 192.431 87.392 194.857 100.051 195.23C123.906 195.923 146.723 188.033 165.153 172.681C183.396 157.488 195.47 136.592 199.114 113.91C200.124 107.566 200.443 103.675 200.417 97.0915C200.39 81.4725 196.959 66.9996 189.965 53.0598C185.258 43.6778 179.434 35.7617 171.562 28.0588C156.297 13.1328 137.149 3.85733 115.475 0.84549C112.55 0.445679 97.7371 0.0991821 94.7319 0.365723ZM98.721 27.0459V44.5307L91.7534 44.3708C82.0998 44.1309 65.0796 42.8248 64.5211 42.2651C64.1754 41.892 68.4304 34.2424 71.4355 29.7913C76.9671 21.6353 82.2859 16.3046 88.6153 12.653C91.1949 11.1604 95.8755 9.6145 98.003 9.5612L98.721 9.53455V27.0459ZM111.752 10.5207C121.938 13.9057 132.043 24.114 139.809 38.9334L141.564 42.2918L140.686 42.425C136.564 43.1447 122.177 44.1575 113.826 44.3708L106.699 44.5307V26.9926V9.48123L108.242 9.66782C109.066 9.77443 110.662 10.1476 111.752 10.5207ZM71.3292 15.5849C67.0209 20.3026 60.8777 29.6846 57.0216 37.3875C56.0642 39.2799 55.2398 40.9058 55.2132 40.9591C55.027 41.1723 42.1023 38.6935 38.5121 37.7607L37.4749 37.4675L40.1077 34.8021C46.9424 27.8988 55.0802 22.0617 63.9094 17.7971C66.5422 16.5444 72.1536 14.1456 72.6323 14.0657C72.6589 14.0657 72.0738 14.7587 71.3292 15.5849ZM141.325 17.6106C146.218 19.8495 153.904 24.7537 159.169 28.965C162.307 31.4704 168.397 37.121 168.397 37.4941C168.397 37.9473 155.313 40.6393 151.191 41.0391C150.367 41.119 150.34 41.0924 148.372 37.121C144.41 29.0716 139.57 21.6086 134.703 16.0114L133.027 14.0923L136.165 15.3983C137.867 16.0913 140.208 17.1042 141.325 17.6106ZM37.0228 46.583C50.3465 49.5682 61.6223 51.274 76.7809 52.58C82.5518 53.0598 91.3279 53.5129 95.6095 53.5129H98.721V73.5031V93.4933H96.3276H93.9341V97.7578V102.022H96.3276H98.721V121.559V141.123L90.9556 141.283C80.5307 141.523 69.5208 142.429 60.6384 143.735C59.2023 143.948 57.8194 144.135 57.5268 144.135C57.1013 144.135 56.862 143.495 55.9312 140.19C54.2824 134.3 53.2452 129.129 52.0219 120.866L51.8623 119.88H47.7668H43.6979L43.8043 120.6C43.8841 121.026 44.1234 122.786 44.3362 124.545C45.0808 130.089 47.0754 139.577 48.5381 144.455L48.937 145.681L46.4903 146.134C41.2779 147.067 38.3525 147.68 34.7889 148.586C32.7678 149.119 31.0392 149.439 30.9328 149.306C29.3106 147.04 26.0129 141.79 24.5502 139.098C19.1516 129.262 15.7742 117.855 14.604 105.674L14.2583 102.022H19.391H24.5236V97.7578V93.4933H20.3484C18.0347 93.4933 15.721 93.4133 15.2157 93.3334L14.2849 93.1734L14.4711 90.3482C15.4285 75.8486 20.4015 61.4024 28.9382 48.2355C30.002 46.6096 30.9328 45.2503 30.9594 45.2503C31.0126 45.2503 33.7518 45.8634 37.0228 46.583ZM176.562 47.6491C180.046 52.8732 182.865 58.3106 185.231 64.3343C188.636 72.9167 190.444 80.8861 191.401 91.5476L191.587 93.4933H176.269H160.951V89.9217C160.951 85.7637 160.659 82.5387 159.728 76.435C158.478 68.2257 156.43 58.7903 154.542 52.6334C154.09 51.1674 153.797 49.9413 153.851 49.888C153.93 49.8081 155.526 49.5149 157.388 49.2217C161.802 48.5287 164.807 47.9157 170.392 46.4764C172.892 45.8367 174.993 45.4102 175.073 45.4902C175.179 45.5702 175.844 46.5564 176.562 47.6491ZM146.165 53.9927C149.383 63.9611 151.883 78.1408 152.601 90.3482L152.787 93.4933H129.73H106.699L106.752 73.4231L106.832 53.3797L114.544 53.2197C122.204 53.0332 129.171 52.58 138.08 51.6738C140.633 51.4073 143.293 51.1674 143.984 51.1408L145.234 51.1141L146.165 53.9927ZM191.401 104.208C190.125 119.907 185.338 133.847 176.775 146.667C174.275 150.425 170.764 154.903 169.94 155.436C169.036 155.996 158.292 149.919 154.489 146.72L153.744 146.107L155.26 144.268C158.372 140.457 160.765 136.272 162.414 131.714L163.398 129.022L166.775 129.156C170.099 129.262 170.179 129.262 170.924 128.596C171.722 127.93 171.722 127.903 171.801 124.598C171.881 121.4 171.881 121.266 171.243 120.52L170.578 119.747L161.377 119.667L152.175 119.587V115.882C152.175 113.857 152.095 111.991 152.016 111.751C151.67 110.871 150.446 110.552 147.415 110.552C145.819 110.552 144.17 110.685 143.771 110.818C142.468 111.325 142.362 111.724 142.335 115.802V119.587L133.4 119.667L124.464 119.747L123.959 120.387C123.533 120.92 123.454 121.453 123.454 124.358C123.454 128.996 123.4 128.943 128.134 128.943H131.644L132.097 130.328C133.426 134.433 136.458 139.684 140.155 144.242L141.644 146.054L140.873 146.72C137.123 149.786 131.565 153.251 127.203 155.196C123.374 156.902 123.028 157.355 123.932 159.221C124.836 161.06 126.831 163.565 127.576 163.752C128.48 163.965 129.783 163.512 133.16 161.726C138.107 159.168 140.819 157.382 147.521 152.291C147.734 152.131 148.611 152.664 150.207 153.917C153.505 156.502 157.015 158.821 160.286 160.554C161.829 161.38 163.132 162.126 163.212 162.259C163.291 162.366 162.653 163.112 161.776 163.912C156.43 168.896 147.84 174.627 141.112 177.745C139.889 178.305 138.798 178.785 138.718 178.785C138.665 178.785 139.224 177.985 140.022 176.972C141.67 174.92 143.239 172.654 143.08 172.548C143.053 172.494 141.112 172.015 138.798 171.455L134.596 170.469L133.479 171.748C125.927 180.491 116.672 186.088 108.774 186.701L106.699 186.861V168.257V149.679L111.353 149.866L116.007 150.052V145.628V141.203H111.353H106.699V121.613V102.022H149.143H191.587L191.401 104.208ZM154.116 129.929C152.973 132.727 151.404 135.259 148.877 138.511L147.548 140.217L146.776 139.311C144.09 136.192 141.325 131.768 140.633 129.529L140.447 128.943H147.495H154.542L154.116 129.929ZM98.721 168.39V186.781H97.5509C96.1148 186.781 93.2959 186.194 91.2747 185.501C81.0094 181.903 71.4621 173.028 64.1488 160.287C62.4733 157.382 60.3192 152.957 60.4788 152.771C60.8511 152.424 74.946 150.985 82.4987 150.532C85.0517 150.372 87.7643 150.212 88.4823 150.185C89.227 150.132 91.8066 150.079 94.2798 150.052L98.721 149.999V168.39ZM52.7931 156.396C55.7185 163.512 61.0107 172.041 65.6114 177.106C66.4359 178.038 67.0475 178.785 66.9411 178.785C66.8614 178.785 65.3721 178.092 63.6701 177.212C57.5003 174.12 52.1814 170.682 46.8892 166.311C43.9373 163.859 37.5547 157.808 37.5547 157.435C37.5547 157.302 38.2196 157.009 39.044 156.769C41.0119 156.209 50.8517 154.29 51.4634 154.343C51.8091 154.37 52.208 155.01 52.7931 156.396Z M53.6441 59.0569C53.2186 59.3234 52.6867 59.8565 52.5271 60.203C52.341 60.5495 50.373 65.8269 48.1657 71.9039C42.315 88.0293 36.6239 103.488 35.6931 105.781C35.2676 106.873 34.8953 107.966 34.8953 108.233C34.8953 108.499 35.241 109.086 35.6665 109.512L36.4377 110.285H40.746C43.166 110.285 45.2669 110.178 45.5595 110.018C46.2509 109.645 46.5701 108.926 48.1923 104.208L49.6018 100.157H59.8671H70.1324L71.5685 104.475C72.6322 107.646 73.1907 109.006 73.7492 109.539L74.4672 110.285H79.0414C83.5092 110.285 83.589 110.285 84.2272 109.619C84.5995 109.272 84.8921 108.739 84.8921 108.473C84.8921 108.179 83.8283 105.088 82.5252 101.596C80.3179 95.6789 71.6217 72.2237 68.4038 63.4014C66.5156 58.3106 66.9943 58.5771 59.8937 58.5771C55.0801 58.5771 54.3621 58.6304 53.6441 59.0569ZM61.7021 75.5021C62.5797 78.1408 64.0955 82.5387 65.0529 85.284L66.7815 90.2949H59.8937C56.0907 90.2949 52.9792 90.2149 52.9792 90.1349C52.9792 89.5219 59.7341 70.3313 59.8937 70.4913C60 70.5979 60.7979 72.8634 61.7021 75.5021Z',
    );

    final Paint paint =
        Paint()
          ..color = Colors.black.withOpacity(0.15)
          ..maskFilter = const MaskFilter.blur(BlurStyle.normal, 4);

    // نعمل مقياس (scale) علشان يتناسب مع حجم الأيقونة
    final Matrix4 matrix4 = Matrix4.identity();
    matrix4.scale(size.width / 280, size.height / 280);
    final scaledPath = path.transform(matrix4.storage);

    canvas.drawPath(scaledPath.shift(const Offset(40, 50)), paint);
  }

  @override
  bool shouldRepaint(covariant CustomPainter oldDelegate) => false;
}
